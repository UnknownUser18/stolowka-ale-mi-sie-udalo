<form (submit)="$event.preventDefault()">
  <fieldset fieldset-default>
    <legend>
      <fa-icon [icon]="icons.faIdCard" />
      Karta
    </legend>
    <label label-default>
      <span>Numer karty:</span>
      <input [field]="cardForm.key_card" aria-label="Numer karty" input-default type="text">
    </label>
    <label label-default>
      <span>Data aktywacji:</span>
      <input [field]="cardForm.data_wydania" aria-label="Data aktywacji" input-default type="date">
    </label>
    <label label-default>
      <span>Ostatnie użycie:</span>
      <input [field]="cardForm.ostatnie_uzycie" aria-label="Ostatnie użycie" input-default type="datetime-local">
    </label>
    <div>
      <button [dialog]="deleteCardDialog" [disabled]="cardForm.key_card().value() === ''" button-danger>
        <fa-icon [icon]="icons.faTrashCan" />
        Dezaktywuj kartę
      </button>
      <button [dialog]="addCardDialog" button-primary>
        Aktywuj nową kartę
        <fa-icon [icon]="icons.faPlus" />
      </button>
    </div>
  </fieldset>
</form>

<app-dialog #addCardDialog>
  <div class="dialog activate-new-card-dialog">
    <h3>Aktywacja nowej karty</h3>
    <p>Aktywacja nowej karty spowoduje dezaktywację obecnej karty przypisanej do tego użytkownika.</p>
    <p>Czy na pewno chcesz aktywować nową kartę?</p>
    <div>
      <button (click)="addCardDialog.hide()" button-default>
        <fa-icon [icon]="icons.faBan" />
        Anuluj
      </button>
      <button (click)="deleteCard(); addCardDialog.hide()" [dialog]="addCardContinueDialog" button-primary>
        Kontynuuj
        <fa-icon [icon]="icons.faArrowRight" />
      </button>
    </div>
  </div>
</app-dialog>

<app-dialog #addCardContinueDialog>
  <div class="dialog activate-card-dialog">
    <h3>Aktywacja karty</h3>
    <form (submit)="$event.preventDefault()" class="add-card-form">
      <fieldset fieldset-default>
        <legend>
          <fa-icon [icon]="icons.faIdCard" />
          Karta
        </legend>
        <label label-default>
          <span>Numer karty:</span>
          <input [field]="addCardForm.key_card" input-default type="text">
        </label>
      </fieldset>
      <div>
        <button button-danger type="reset">
          <fa-icon [icon]="icons.faRotateLeft" />
          Resetuj
        </button>
        <button (click)="addCardToDB(); addCardContinueDialog.hide()" [disabled]="addCardForm().invalid()" button-success type="submit">
          Aktywuj kartę
          <fa-icon [icon]="icons.faCheck" />
        </button>
      </div>
    </form>
  </div>
</app-dialog>

<app-dialog #deleteCardDialog>
  <div class="dialog deactivate-card-dialog">
    <h3>Czy na pewno chcesz zdezaktywować kartę?</h3>
    <h4>Co to oznacza?</h4>
    <p>Oznacza to, że ta osoba nie będzie mogła za pomocą karty przychodzić na stołówkę.</p>
    <div>
      <button (click)="deleteCardDialog.hide()" button-default>
        <fa-icon [icon]="icons.faBan" />
        Anuluj
      </button>
      <button (click)="deleteCard(); deleteCardDialog.hide()" button-danger>
        Tak
        <fa-icon [icon]="icons.faCheck" />
      </button>
    </div>
  </div>
</app-dialog>
